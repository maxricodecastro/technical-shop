# Shopping Assistant

A conversational AI shopping assistant that uses natural language to filter products. Built with Next.js 14+, TypeScript, and Tailwind CSS.

## Overview

The assistant replaces traditional filter panels with a conversational interface. Users type natural language queries (e.g., "I want a cozy blue sweater"), and the AI suggests filter chips that can be clicked to narrow down products.

## Tech Stack

| Category | Technology |
|----------|------------|
| Framework | Next.js 14+ (App Router) |
| Language | TypeScript (strict mode) |
| Styling | Tailwind CSS v4.0 |
| UI Components | Catalyst UI Kit (Tailwind Labs) |
| LLM | Groq (Llama 3.3 70B) |
| Vision | OpenAI GPT-4o (image analysis) |
| Validation | Zod (runtime schema validation) |

## Core Features

### Conversational Filter Generation
- User types natural language query
- AI generates filter chips (categories, colors, materials, styles)
- Chips are clickable to apply/remove filters
- Products update in real-time

### Filter Logic
- **OR within sections**: (sweaters OR hoodies) 
- **AND across sections**: (sweaters OR hoodies) AND (blue OR navy) AND (cozy)

### Data-Driven Colors
Colors are derived from the product catalog, not generated by the LLM. This ensures users only see colors that actually exist for the suggested product types.

### LLM-Driven Materials & Styles
Materials and style tags are generated by the LLM based on context. For example, "running outfit" suggests cotton and polyester (not cashmere or silk).

## Quick Start

```bash
cd shopping-assistant
npm install
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

## Project Structure

```
shopping-assistant/
├── src/
│   ├── app/
│   │   ├── api/chat/route.ts     # Main AI endpoint
│   │   ├── page.tsx              # Home page
│   │   └── test-backend/         # Test page for API
│   ├── components/               # UI components
│   ├── contexts/                 # React contexts
│   ├── data/
│   │   └── products.json         # Product catalog (~50 items)
│   ├── lib/
│   │   ├── ai/                   # Prompts, validation
│   │   ├── catalog/              # Facet extraction
│   │   └── filters/              # Filter engine
│   └── types/                    # TypeScript definitions
```

## API

### `POST /api/chat`

**Request:**
```json
{
  "message": "I want a cozy blue sweater"
}
```

**Response:**
```json
{
  "message": "Looking for cozy sweaters! Here are some filters:",
  "suggestedChips": [
    { "type": "subcategory", "label": "Sweaters", "filterKey": "subcategory", "filterValue": "sweaters" },
    { "type": "color", "label": "Blue", "filterKey": "colors", "filterValue": "blue" },
    { "type": "material", "label": "Wool", "filterKey": "materials", "filterValue": "wool" },
    { "type": "style_tag", "label": "Cozy", "filterKey": "styleTags", "filterValue": "cozy" }
  ]
}
```

## Documentation

- **[Architecture.md](./Architecture.md)** - Types, API contracts, filter logic, prompt strategy
- **[Frontend.md](./Frontend.md)** - UI components, layout, styling
- **[Development.md](./Development.md)** - API keys, testing, development notes

## Design Principles

1. **Stateless requests** - Each API call is independent (no conversation history)
2. **Simple API** - Request has only `message`, response has `message` + `suggestedChips`
3. **Grounded output** - All chips validated against catalog facets
4. **Fast iteration** - Keep it simple, avoid over-engineering

